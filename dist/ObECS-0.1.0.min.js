{"code":"!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.ObECS=t()}}(function(){return function t(e,n,i){function s(o,c){if(!n[o]){if(!e[o]){var f=\"function\"==typeof require&&require;if(!c&&f)return f(o,!0);if(r)return r(o,!0);var u=new Error(\"Cannot find module '\"+o+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var a=n[o]={exports:{}};e[o][0].call(a.exports,function(t){var n=e[o][1][t];return s(n?n:t)},a,a.exports,t,e,n,i)}return n[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,e,n){e.exports={Class:t(\"./src/class\"),Signal:t(\"./src/signal\"),Event:t(\"./src/event\"),Factory:t(\"./src/factory\"),System:t(\"./src/system\"),World:t(\"./src/world\")}},{\"./src/class\":2,\"./src/event\":3,\"./src/factory\":4,\"./src/signal\":5,\"./src/system\":6,\"./src/world\":7}],2:[function(t,e,n){var i=!1,s=/xyz/.test(function(){xyz})?/\\b_super\\b/:/.*/,r=e.exports=function(){};r.extend=function(t){function e(){!i&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;i=!0;var r=new this;i=!1;for(name in t)r[name]=\"function\"==typeof t[name]&&\"function\"==typeof n[name]&&s.test(t[name])?function(t,e){return function(){var i=this._super;this._super=n[t];var s=e.apply(this,arguments);return this._super=i,s}}(name,t[name]):t[name];return e.prototype=r,e.prototype.contructor=e,e.extend=arguments.callee,e}},{}],3:[function(t,e,n){var i=t(\"./class\"),s=t(\"./signal\");e.exports=i.extend({init:function(){this._events={}},listen:function(t,e,n){\"undefined\"==typeof n&&(n=null),t in this._events||(this._events[t]=new s),this._events[t].listen(e,n)},signal:function(t,e){t in this._events?this._events[t].signal(t,e):this._events[t]=new s}})},{\"./class\":2,\"./signal\":5}],4:[function(t,e,n){function i(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n=\"x\"==t?e:3&e|8;return n.toString(16)})}var s=t(\"./class\"),r=e.exports=s.extend({Assembler:function(){return s.extend({init:function(t){this._factory=t,this._entity=this._factory.createEntity()},c:function(t){return this._factory.addComponent(this._entity,t),this},finish:function(t){var e=this._entity;return this._entity=this._factory.createEntity(),void 0!==t&&(this._entity.id=t),e}})}(),init:function(t){t=t||null,this._components={},this._assembleges={},\"object\"==typeof t?this._default_component_value=[!0,JSON.stringify(t)]:this._default_component_value=[!1,t]},defineComponent:function(t,e){t in this._components||(\"object\"==typeof e?this._components[t]=[!0,JSON.stringify(e)]:this._components[t]=[!1,e])},addComponent:function(t,e){if(!(e in t)){var n=this._default_component_value;e in this._components&&(n=this._components[e]),n[0]?t[e]=JSON.parse(n[1]):t[e]=n[1]}},defineAssemblege:function(t,e){if(!(t in this._assembleges)&&e&&null!==e&&\"object\"==typeof e){var n=e;if(e.constructor===Array){for(var i=new r.prototype.Assembler(this),s=0;s<e.length;s++)i.c(e[s]);n=i.finish(),delete n.id}this._assembleges[t]=JSON.stringify(n)}},createAssembler:function(){return new r.prototype.Assembler(this)},createEntity:function(t,e){t=\"\"|t;var n={};return t in this._assembleges&&(n=JSON.parse(this._assembleges[t])),void 0!==e?n.id=e:n.id=i(),n},cloneEntity:function(t,e){var n=this._clone(t);return void 0!==e?n.id=e:n.id=i(),n},_clone:function(t){if(null===t||\"object\"!=typeof t)return t;temp=t.constructor();for(var e in t)\"id\"!==e&&(temp[e]=this._clone(t[e]));return temp}})},{\"./class\":2}],5:[function(t,e,n){var s=t(\"./class\");_Signal_ID=0;e.exports=s.extend({init:function(){this._listeners=[]},listen:function(t,e){for(\"object\"!=typeof e&&(e=null),i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners[i][0];var n=_Signal_ID;return this._listeners.push([n,t,e]),_Signal_ID+=1,n},removeListener:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners.splice(i,1),!0;return!1},removeListenerByID:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][0]==t)return this._listeners.splice(i,1),!0;return!1},signal:function(){var t=arguments;for(i=0;i<this._listeners.length;++i)this._listeners[i][1].apply(this._listeners[i][2],t)}})},{\"./class\":2}],6:[function(t,e,n){{var i=t(\"./class\");e.exports=i.extend({init:function(){this._world=null},assignedWorld:function(t){null===this._world&&(this._world=t,this._world.event().listen(\"assign_entity\",this.onAssignEntity,this))},onAssignEntity:function(t,e){}})}},{\"./class\":2}],7:[function(t,e,n){{var i=t(\"./class\"),s=t(\"./event\"),r=t(\"./factory\"),o=t(\"./system\");e.exports=i.extend({init:function(t){\"undefined\"==typeof t&&(t={}),this._factory=t.factory_class?new t.factory_class:new r,this._event=t.event_class?new t.event_class:new s,this._systems=[],this._entities={}},factory:function(){return this._factory},event:function(){return this._event},assignSystem:function(t){return t&&t instanceof o&&(t.assignedWorld(this),this._systems.push(t)),t},assignEntity:function(t){t&&t.id&&(t.id in this._entities||(this._entities[t.id]=t,this._event.signal(\"assign_entity\",t)))},removeEntity:function(t){t&&t.id&&t.id in this._entities&&(delete this._entities[t.id],this._event.signal(\"remove_entity\",t))},removeEntityByID:function(t){t in this._entities&&this.removeEntity(this._entities[t])},getEntityByID:function(t){return t in this._entities?this._entities[t]:void 0},update:function(t){t|={},this._event.signal(\"update\",t)}})}},{\"./class\":2,\"./event\":3,\"./factory\":4,\"./system\":6}]},{},[1])(1)});","map":null}