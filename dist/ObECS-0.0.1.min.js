{"code":"!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var i;i=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,i.ObECS=t()}}(function(){return function t(i,n,e){function s(o,a){if(!n[o]){if(!i[o]){var c=\"function\"==typeof require&&require;if(!a&&c)return c(o,!0);if(r)return r(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var u=n[o]={exports:{}};i[o][0].call(u.exports,function(t){var n=i[o][1][t];return s(n?n:t)},u,u.exports,t,i,n,e)}return n[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<e.length;o++)s(e[o]);return s}({1:[function(t,i,n){i.exports={Class:t(\"./src/class\"),Signal:t(\"./src/signals\"),Factory:t(\"./src/factory\"),System:t(\"./src/system\"),World:t(\"./src/world\")}},{\"./src/class\":2,\"./src/factory\":3,\"./src/signals\":4,\"./src/system\":5,\"./src/world\":6}],2:[function(t,i,n){var e=!1,s=/xyz/.test(function(){xyz})?/\\b_super\\b/:/.*/,r=i.exports=function(){};r.extend=function(t){function i(){!e&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;e=!0;var r=new this;e=!1;for(name in t)r[name]=\"function\"==typeof t[name]&&\"function\"==typeof n[name]&&s.test(t[name])?function(t,i){return function(){var e=this._super;this._super=n[t];var s=i.apply(this,arguments);return this._super=e,s}}(name,t[name]):t[name];return i.prototype=r,i.prototype.contructor=i,i.extend=arguments.callee,i}},{}],3:[function(t,i,n){function e(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var i=16*Math.random()|0,n=\"x\"==t?i:3&i|8;return n.toString(16)})}var s=t(\"./class\"),r=t(\"./signals\"),o=i.exports=s.extend({Assembler:function(){return s.extend({init:function(t){this._factory=t,this._entity=this._factory.createEntity()},c:function(t){return this._factory.addComponent(this._entity,t),this},finish:function(t){var i=this._entity;return this._entity=this._factory.createEntity(),void 0!==t&&(this._entity.id=t),i}})}(),init:function(t){t=t||null,this._components={},this._assembleges={},\"object\"==typeof t?this._default_component_value=[!0,JSON.stringify(t)]:this._default_component_value=[!1,t]},defineComponent:function(t,i){t in this._components||(\"object\"==typeof i?this._components[t]=[!0,JSON.stringify(i)]:this._components[t]=[!1,i])},addComponent:function(t,i){if(!(i in t)){var n=this._default_component_value;i in this._components&&(n=this._components[i]),n[0]?t[i]=JSON.parse(n[1]):t[i]=n[1]}},defineAssemblege:function(t,i){if(!(t in this._assembleges)&&i&&null!==i&&\"object\"==typeof i){var n=i;if(i.constructor===Array){for(var e=new o.prototype.Assembler(this),s=0;s<i.length;s++)e.c(i[s]);n=e.finish(),delete n.id}this._assembleges[t]=JSON.stringify(n)}},createAssembler:function(){return new o.prototype.Assembler(this)},createEntity:function(t,i){t=\"\"|t;var n={};return t in this._assembleges&&(n=JSON.parse(this._assembleges[t])),void 0!==i?n.id=i:n.id=e(),this.signalEntityCreated.emit(n),n},cloneEntity:function(t,i){var n=this._clone(t);return void 0!==i?n.id=i:n.id=e(),this.signalEntityCreated.emit(n),n},signalEntityCreated:new r,_clone:function(t){if(null===t||\"object\"!=typeof t)return t;temp=t.constructor();for(var i in t)\"id\"!==i&&(temp[i]=this._clone(t[i]));return temp}})},{\"./class\":2,\"./signals\":4}],4:[function(t,n,e){var s=t(\"./class\");_Signal_ID=0;n.exports=s.extend({init:function(){this._listeners=[]},add:function(t,n){for(\"object\"!=typeof n&&(n=null),i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners[i][0];var e=_Signal_ID;return this._listeners.push([e,t,n]),_Signal_ID+=1,e},remove:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners.splice(i,1),!0;return!1},removeByID:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][0]==t)return this._listeners.splice(i,1),!0;return!1},emit:function(){var t=arguments;for(i=0;i<this._listeners.length;++i)this._listeners[i][1].apply(this._listeners[i][2],t)}})},{\"./class\":2}],5:[function(t,i,n){{var e=t(\"./class\"),s=(t(\"./signals\"),t(\"./factory\"));i.exports=e.extend({init:function(t){this._factory=null,t&&this.setFactory(t)},setFactory:function(t){t&&t instanceof s&&null!=this._factory&&(this._factory=t,this._factory.signalEntityRegistered.add(this.onEntityRegistered,this),this._factory.signalEntityRemoved.add(this.onEntityRemoved,this))},update:function(t){},assignedWorld:function(t){},assignEntity:function(t){},onEntityRegistered:function(t){},onEntityRemoved:function(t){}})}},{\"./class\":2,\"./factory\":3,\"./signals\":4}],6:[function(t,i,n){{var e=t(\"./class\"),s=t(\"./signals\"),r=t(\"./factory\"),o=t(\"./system\");i.exports=e.extend({init:function(){this._factory=new r,this._systems=[],this._entities={}},factory:function(){return this._factory},assignSystem:function(t){return t&&t instanceof o&&(t.setFactory&&t.setFactory(this._factory),t.update&&this.signalUpdate.add(t.update,t),t.assignEntity&&this.signalAssignEntity.add(t.assignEntity,t),t.removeEntity&&this.signalRemoveEntity.add(t.removeEntity,t),t.assignedWorld&&t.assignedWorld(this),this._systems.push(t)),t},assignEntity:function(t){t&&t.id&&(t.id in this._entities||(this._entities[t.id]=t,this.signalAssignEntity.emit(t)))},removeEntity:function(t){t&&t.id&&t.id in this._entities&&(delete this._entities[t.id],this.signalRemoveEntity.emit(t))},removeEntityByID:function(t){t in this._entities&&this.removeEntity(this._entities[t])},getEntityByID:function(t){return t in this._entities?this._entities[t]:void 0},update:function(t){t|={},this.signalUpdate.emit(t)},signalUpdate:new s,signalAssignEntity:new s,signalRemoveEntity:new s})}},{\"./class\":2,\"./factory\":3,\"./signals\":4,\"./system\":5}]},{},[1])(1)});","map":null}