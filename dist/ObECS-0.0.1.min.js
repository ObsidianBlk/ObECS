{"code":"!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.ObECS=t()}}(function(){return function t(n,i,e){function s(o,a){if(!i[o]){if(!n[o]){var c=\"function\"==typeof require&&require;if(!a&&c)return c(o,!0);if(r)return r(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var u=i[o]={exports:{}};n[o][0].call(u.exports,function(t){var i=n[o][1][t];return s(i?i:t)},u,u.exports,t,n,i,e)}return i[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<e.length;o++)s(e[o]);return s}({1:[function(t,n,i){n.exports={Class:t(\"./src/class\"),Signals:t(\"./src/signals\"),Factory:t(\"./src/factory\"),System:t(\"./src/system\"),World:t(\"./src/world\")}},{\"./src/class\":2,\"./src/factory\":3,\"./src/signals\":4,\"./src/system\":5,\"./src/world\":6}],2:[function(t,n,i){var e=!1,s=/xyz/.test(function(){xyz})?/\\b_super\\b/:/.*/,r=n.exports=function(){};r.extend=function(t){function n(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var r=new this;e=!1;for(name in t)r[name]=\"function\"==typeof t[name]&&\"function\"==typeof i[name]&&s.test(t[name])?function(t,n){var e=this._super;this._super=i[t];var s=n.apply(this,arguments);return this._super=e,s}(name,t[name]):t[name];return n.prototype=r,n.prototype.contructor=n,n.extend=arguments.callee,n}},{}],3:[function(t,n,i){function e(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var n=16*Math.random()|0,i=\"x\"==t?n:3&n|8;return i.toString(16)})}var s=t(\"./class\"),r=t(\"./signals\"),o=n.exports=s.extend({Assembler:function(){return s.extend({init:function(t){this._factory=t,this._entity=this._factory.createEntity()},c:function(t){return this._factory.addComponent(this._entity,t),this},finish:function(){var t=this._entity;return this._entity=this._factory.createEntity(),t}})}(),init:function(t){t=t||null,this._components={},this._assembleges={},\"object\"==typeof t?this._default_component_value=[!0,JSON.stringify(t)]:this._default_component_value=[!1,t]},defineComponent:function(t,n){t in this._components||(\"object\"==typeof n?this._components[t]=[!0,JSON.stringify(n)]:this._components[t]=[!1,n])},addComponent:function(t,n){if(!(n in t)){var i=this._default_component_value;n in this._components&&(i=this._components[n]),i[0]?t[n]=JSON.parse(i[1]):t[n]=i[1]}},defineAssemblege:function(t,n){if(!(t in this._assembleges)&&null!==n&&\"object\"==typeof n){var i=n;if(n.constructor===Array){for(var e=new o.prototype.Assembler(this),s=0;s<n.length;s++)e.c(n[s]);i=e.finish(!1),delete i.id}this._assembleges[t]=JSON.stringify(i)}},createAssembler:function(){return new o.prototype.Assembler(this)},createEntity:function(t){t=\"\"|t;var n={};return t in this._assembleges&&(n=JSON.parse(this._assembleges[t])),n.id=e(),this.signalEntityCreated.emit(n),n},cloneEntity:function(t){var n=this._clone(t);return n.id=e(),this.signalEntityCreated.emit(n),n},signalEntityCreated:new r,_clone:function(t){if(null===t||\"object\"!=typeof t)return t;temp=t.constructor();for(var n in t)\"id\"!==n&&(temp[n]=this._clone(t[n]));return temp}})},{\"./class\":2,\"./signals\":4}],4:[function(t,n,e){var s=t(\"./class\");_Signal_ID=0;n.exports=s.extend({init:function(){this._listeners=[]},add:function(t,n){for(\"object\"!=typeof n&&(n=null),i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners[i][0];var e=_Signal_ID;return this._listeners.push([e,t,n]),_Signal_ID+=1,e},remove:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners.splice(i,1),!0;return!1},removeByID:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][0]==t)return this._listeners.splice(i,1),!0;return!1},emit:function(){var t=arguments;for(i=0;i<this._listeners.length;++i)this._listeners[i][1].apply(this._listeners[i][2],t)}})},{\"./class\":2}],5:[function(t,n,i){{var e=t(\"./class\"),s=(t(\"./signals\"),t(\"./factory\"));n.exports=e.extend({init:function(t){this._factory=null,t&&this.setFactory(t)},setFactory:function(t){t&&t instanceof s&&null!=this._factory&&(this._factory=t,this._factory.signalEntityRegistered.add(this.onEntityRegistered,this),this._factory.signalEntityRemoved.add(this.onEntityRemoved,this))},update:function(t){},assignedWorld:function(t){},assignEntity:function(t){},onEntityRegistered:function(t){},onEntityRemoved:function(t){}})}},{\"./class\":2,\"./factory\":3,\"./signals\":4}],6:[function(t,n,i){{var e=t(\"./class\"),s=t(\"./signals\"),r=t(\"./factory\"),o=t(\"./system\");n.exports=e.extend({init:function(){this._factory=new r,this._systems=[],this._entities={}},factory:function(){return this._factory},assignSystem:function(t){return t&&t instanceof o&&(t.setFactory&&t.setFactory(this._factory),t.update&&this.signalUpdate.add(t.update,t),t.assignEntity&&this.signalAssignEntity.add(t.assignEntity,t),t.removeEntity&&this.signalRemoveEntity.add(t.removeEntity,t),t.assignedWorld&&t.assignedWorld(this),this._systems.push(t)),t},assignEntity:function(t){t&&t.id&&(t.id in this._entities||(this._entities[t.id]=t,this.signalAssignEntity.emit(t)))},removeEntity:function(t){t&&t.id&&t.id in this._entities&&(delete this._entities[t.id],this.signalRemoveEntity.emit(t))},removeEntityByID:function(t){t in this._entities&&this.removeEntity(this._entities[t])},getEntityByID:function(t){return t in this._entities?this._entities[t]:void 0},update:function(t){t|={},this.signalUpdate.emit(t)},signalUpdate:new s,signalAssignEntity:new s,signalRemoveEntity:new s})}},{\"./class\":2,\"./factory\":3,\"./signals\":4,\"./system\":5}]},{},[1])(1)});","map":null}