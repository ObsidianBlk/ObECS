{"code":"!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n;n=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,n.ObECS=t()}}(function(){return function t(n,e,i){function s(o,c){if(!e[o]){if(!n[o]){var f=\"function\"==typeof require&&require;if(!c&&f)return f(o,!0);if(r)return r(o,!0);var u=new Error(\"Cannot find module '\"+o+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var l=e[o]={exports:{}};n[o][0].call(l.exports,function(t){var e=n[o][1][t];return s(e?e:t)},l,l.exports,t,n,e,i)}return e[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,n,e){n.exports={Class:t(\"./src/class\"),Signal:t(\"./src/signal\"),Event:t(\"./src/event\"),Factory:t(\"./src/factory\"),System:t(\"./src/system\"),World:t(\"./src/world\")}},{\"./src/class\":2,\"./src/event\":3,\"./src/factory\":4,\"./src/signal\":5,\"./src/system\":6,\"./src/world\":7}],2:[function(t,n,e){var i=!1,s=/xyz/.test(function(){xyz})?/\\b_super\\b/:/.*/,r=n.exports=function(){};r.extend=function(t){function n(){!i&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;i=!0;var r=new this;i=!1;for(name in t)r[name]=\"function\"==typeof t[name]&&\"function\"==typeof e[name]&&s.test(t[name])?function(t,n){return function(){var i=this._super;this._super=e[t];var s=n.apply(this,arguments);return this._super=i,s}}(name,t[name]):t[name];return n.prototype=r,n.prototype.contructor=n,n.extend=arguments.callee,n}},{}],3:[function(t,n,e){var i=t(\"./class\"),s=t(\"./signal\");n.exports=i.extend({init:function(){this._events={}},listen:function(t,n,e){\"undefined\"==typeof e&&(e=null),t in this._events||(this._events[t]=new s),this._events[t].listen(n,e)},signal:function(t,n){t in this._events?this._events[t].signal(t,n):this._events[t]=new s}})},{\"./class\":2,\"./signal\":5}],4:[function(t,n,e){function i(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var n=16*Math.random()|0,e=\"x\"==t?n:3&n|8;return e.toString(16)})}var s=t(\"./class\"),r=n.exports=s.extend({Assembler:function(){return s.extend({init:function(t){this._factory=t,this._entity=this._factory.createEntity()},c:function(t){return this._factory.addComponent(this._entity,t),this},finish:function(t){var n=this._entity;return this._entity=this._factory.createEntity(),void 0!==t&&(this._entity.id=t),n}})}(),init:function(t){t=t||null,this._components={},this._assembleges={},\"object\"==typeof t?this._default_component_value=[!0,JSON.stringify(t)]:this._default_component_value=[!1,t]},defineComponent:function(t,n){t in this._components||(\"object\"==typeof n?this._components[t]=[!0,JSON.stringify(n)]:this._components[t]=[!1,n])},addComponent:function(t,n){if(!(n in t)){var e=this._default_component_value;n in this._components&&(e=this._components[n]),e[0]?t[n]=JSON.parse(e[1]):t[n]=e[1]}},defineAssemblege:function(t,n){if(!(t in this._assembleges)&&n&&null!==n&&\"object\"==typeof n){var e=n;if(n.constructor===Array){for(var i=new r.prototype.Assembler(this),s=0;s<n.length;s++)i.c(n[s]);e=i.finish(),delete e.id}this._assembleges[t]=JSON.stringify(e)}},createAssembler:function(){return new r.prototype.Assembler(this)},createEntity:function(t,n){t=\"\"|t;var e={};return t in this._assembleges&&(e=JSON.parse(this._assembleges[t])),void 0!==n?e.id=n:e.id=i(),e},cloneEntity:function(t,n){var e=this._clone(t);return void 0!==n?e.id=n:e.id=i(),e},_clone:function(t){if(null===t||\"object\"!=typeof t)return t;temp=t.constructor();for(var n in t)\"id\"!==n&&(temp[n]=this._clone(t[n]));return temp}})},{\"./class\":2}],5:[function(t,n,e){var s=t(\"./class\");_Signal_ID=0;n.exports=s.extend({init:function(){this._listeners=[]},listen:function(t,n){for(\"object\"!=typeof n&&(n=null),i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners[i][0];var e=_Signal_ID;return this._listeners.push([e,t,n]),_Signal_ID+=1,e},removeListener:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][1]==t)return this._listeners.splice(i,1),!0;return!1},removeListenerByID:function(t){for(i=0;i<this._listeners.length;i++)if(this._listeners[i][0]==t)return this._listeners.splice(i,1),!0;return!1},signal:function(){var t=arguments;for(i=0;i<this._listeners.length;++i)null!==this._listeners[i][2]?this._listeners[i][1].apply(this._listeners[i][2],t):this._listeners[i][1].apply(null,t)}})},{\"./class\":2}],6:[function(t,n,e){{var i=t(\"./class\");n.exports=i.extend({init:function(){this._world=null},world:function(){return this._world},assignedWorld:function(t){null===this._world&&(this._world=t,this._world.event().listen(\"assign_entity\",this.onAssignEntity,this))},onAssignEntity:function(t,n){}})}},{\"./class\":2}],7:[function(t,n,e){{var i=t(\"./class\"),s=t(\"./event\"),r=t(\"./factory\"),o=t(\"./system\");n.exports=i.extend({init:function(t){\"undefined\"==typeof t&&(t={}),this._factory=t.factory_class?new t.factory_class:new r,this._event=t.event_class?new t.event_class:new s,this._systems=[],this._entities={}},factory:function(){return this._factory},event:function(){return this._event},assignSystem:function(t){return t&&t instanceof o&&(t.assignedWorld(this),this._systems.push(t)),t},assignEntity:function(t){t&&t.id&&(t.id in this._entities||(this._entities[t.id]=t,this._event.signal(\"assign_entity\",t)))},removeEntity:function(t){t&&t.id&&t.id in this._entities&&(delete this._entities[t.id],this._event.signal(\"remove_entity\",t))},removeEntityByID:function(t){t in this._entities&&this.removeEntity(this._entities[t])},getEntityByID:function(t){return t in this._entities?this._entities[t]:void 0},update:function(t){t|={},this._event.signal(\"update\",t)}})}},{\"./class\":2,\"./event\":3,\"./factory\":4,\"./system\":6}]},{},[1])(1)});","map":null}